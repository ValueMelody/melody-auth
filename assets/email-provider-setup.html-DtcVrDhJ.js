import{_ as t,c as o,a as r,o as a}from"./app-BYllXYX5.js";const d={};function i(n,e){return a(),o("div",null,e[0]||(e[0]=[r(`<h1 id="email-provider-setup" tabindex="-1"><a class="header-anchor" href="#email-provider-setup"><span>Email Provider Setup</span></a></h1><p>Melody Auth relies on an email provider to send password reset links, email verification notices, and email-based MFA codes. This guide explains how to configure either SendGrid, Mailgun, Brevo, Resend, Postmark, or SMTP (Node.js only) depending on your needs.</p><h2 id="supported-email-providers" tabindex="-1"><a class="header-anchor" href="#supported-email-providers"><span>Supported Email Providers</span></a></h2><ul><li><strong>Cloudflare Workers or Node.js</strong>: SendGrid, Mailgun, Brevo, Resend and Postmark</li><li><strong>Node.js (Only)</strong>: SMTP server (in addition to the above)</li></ul><h2 id="set-your-email-provider-name" tabindex="-1"><a class="header-anchor" href="#set-your-email-provider-name"><span>Set your email provider name</span></a></h2><p>In your <code>server/wrangler.toml</code> file, set the <code>EMAIL_PROVIDER_NAME</code> variable to the name of your email provider. Available options are &#39;smtp&#39;, &#39;sendgrid&#39;, &#39;mailgun&#39;, &#39;brevo&#39;, &#39;resend&#39;, &#39;postmark&#39;</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token key property">EMAIL_PROVIDER_NAME</span><span class="token punctuation">=</span><span class="token string">&quot;smtp&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="environment-variables" tabindex="-1"><a class="header-anchor" href="#environment-variables"><span>Environment Variables</span></a></h2><p>Use the table below to configure your chosen email provider. Some variables are required only if you’re using a specific provider (e.g., SendGrid).</p><table><thead><tr><th>Variable Name</th><th>Description</th><th>Example Value</th></tr></thead><tbody><tr><td>ENVIRONMENT</td><td>Determines email routing behavior</td><td>&quot;prod&quot; or &quot;dev&quot;</td></tr><tr><td>DEV_EMAIL_RECEIVER</td><td>When ENVIRONMENT ≠ prod, all emails go here (for testing only)</td><td>&quot;test@example.com&quot;</td></tr><tr><td>SENDGRID_API_KEY</td><td>Your SendGrid API key (Required if you intend to use SendGrid)</td><td>&quot;SG.xxxxxxxxxxxxxxxxxxxxxxxx&quot;</td></tr><tr><td>SENDGRID_SENDER_ADDRESS</td><td>Verified sender email address in SendGrid (Required if you intend to use SendGrid)</td><td>&quot;noreply@yourdomain.com&quot;</td></tr><tr><td>MAILGUN_API_KEY</td><td>Your Mailgun API key (Required if you intend to use Mailgun)</td><td>&quot;xxxxxxxxxxxxxxxxxx-xxxxxxxxx&quot;</td></tr><tr><td>MAILGUN_SENDER_ADDRESS</td><td>Sender email address in Mailgun (Required if you intend to use Mailgun)</td><td>&quot;noreply@yourdomain.com&quot;</td></tr><tr><td>BREVO_API_KEY</td><td>Your Brevo API key (Required if you intend to use Brevo)</td><td>&quot;xkeysib-xxxxxxxxxxxxxxxxxxxxxxxx&quot;</td></tr><tr><td>BREVO_SENDER_ADDRESS</td><td>Verified sender address in Brevo (Required if you intend to use Brevo)</td><td>&quot;noreply@yourdomain.com&quot;</td></tr><tr><td>RESEND_API_KEY</td><td>Your Resend.com API key (Required if you intend to use Resend.com)</td><td>&quot;re_xxxxxxxxxxxxxxxxxxxxxxx&quot;</td></tr><tr><td>RESEND_SENDER_ADDRESS</td><td>Verified sender address in Resend.com (Required if you intend to use Resend.com)</td><td></td></tr><tr><td>POSTMARK_API_KEY</td><td>Your Postmark API key (Required if you intend to use Postmark)</td><td>&quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;</td></tr><tr><td>POSTMARK_SENDER_ADDRESS</td><td>Verified sender address in Postmark (Required if you intend to use Postmark)</td><td>&quot;noreply@yourdomain.com&quot;</td></tr><tr><td>SMTP_SENDER_ADDRESS</td><td>SMTP sender email address (Node.js only)</td><td>&quot;noreply@yourdomain.com&quot;</td></tr><tr><td>SMTP_CONNECTION_STRING</td><td>SMTP connection string (Node.js only)</td><td>&quot;smtp://username:password@smtp.mailserver.com:587&quot;</td></tr></tbody></table><h2 id="production-vs-development-behavior" tabindex="-1"><a class="header-anchor" href="#production-vs-development-behavior"><span>Production vs. Development Behavior</span></a></h2><ul><li><p>Production (ENVIRONMENT = &quot;prod&quot;)</p><ul><li>Emails are sent to actual user addresses.</li><li>Ideal for live deployments.</li></ul></li><li><p>Development (ENVIRONMENT ≠ &quot;prod&quot;)</p><ul><li>All emails are redirected to the address in DEV_EMAIL_RECEIVER.</li><li>Prevents emailing real users during testing.</li></ul></li></ul><h2 id="priority-between-providers" tabindex="-1"><a class="header-anchor" href="#priority-between-providers"><span>Priority Between Providers</span></a></h2><ul><li><p>If EMAIL_PROVIDER_NAME is set to a valid provider name, that provider will be used.</p></li><li><p>If EMAIL_PROVIDER_NAME is not set or set to an invalid provider name:</p><ul><li><p>Node.js Environment</p><ul><li>If SMTP_CONNECTION_STRING is defined, SMTP will always be used—regardless of SendGrid, Mailgun, Brevo, Resend or Postmark settings.</li><li>Otherwise, if more than one API key and sender address are provided (SendGrid, Mailgun, Brevo, Resend, Postmark), SendGrid is used first, then Mailgun, Brevo, Resend and finally Postmark.</li></ul></li><li><p>Cloudflare Environment</p><ul><li>SMTP settings are ignored.</li><li>If you set up multiple providers (SendGrid, Mailgun, Brevo, Resend, Postmark), SendGrid takes priority, followed by Mailgun, Brevo, Resend and then Postmark.</li></ul></li></ul></li></ul><h2 id="cloudflare-remote-production-configuration" tabindex="-1"><a class="header-anchor" href="#cloudflare-remote-production-configuration"><span>Cloudflare Remote/Production Configuration</span></a></h2><ol><li>Navigate to the Cloudflare dashboard -&gt; Go to &quot;Workers &amp; Pages&quot;</li><li>Select your &quot;melody-auth&quot; worker -&gt; &quot;Settings&quot; -&gt; &quot;Variables&quot;</li><li>Add any environment variables that apply to your use case.</li><li>Click &quot;Save and deploy&quot; to apply the changes.</li></ol><h2 id="cloudflare-local-development-or-node-js-environment" tabindex="-1"><a class="header-anchor" href="#cloudflare-local-development-or-node-js-environment"><span>Cloudflare Local/Development or Node.js Environment</span></a></h2><ol><li>In your melody-auth/server directory, locate or create a .dev.vars file (you can copy .dev.vars.example if needed).</li><li>Update any environment variables that apply to your use case to .dev.vars</li></ol>`,18)]))}const l=t(d,[["render",i]]),u=JSON.parse('{"path":"/email-provider-setup.html","title":"Email Provider Setup","lang":"en-US","frontmatter":{},"git":{"updatedTime":1755820793000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":4,"url":"https://github.com/Baozier"},{"name":"luizfonseca","username":"luizfonseca","email":"249782+luizfonseca@users.noreply.github.com","commits":1,"url":"https://github.com/luizfonseca"}],"changelog":[{"hash":"728dac9e27daef1ae31a908e05015063f7b544e3","time":1755820793000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add EMAIL_PROVIDER_NAME var to make email provider config more scalable (#432)"},{"hash":"1f6a42a6b45fdfb25e862e4b91e0a9988ee80459","time":1748744819000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add docs in CN (#378)"},{"hash":"cf1dc4794c15ceb5b7b918ee8ca7a33c73bf2559","time":1744763042000,"email":"byn9826@gmail.com","author":"Baozier","message":"Support postmark as email sender (#315)"},{"hash":"b9176ffb653ac42ed1f2f9f4a68eeb27e01bb509","time":1740446897000,"email":"249782+luizfonseca@users.noreply.github.com","author":"Luiz Fonseca","message":"Add resend.com to supported mail providers (#244)"},{"hash":"dab232c28ad153e90129d65b72ad543d428b9685","time":1739055609000,"email":"byn9826@gmail.com","author":"Baozier","message":"Update docs structure (#223)","tag":"v1.1.6"}]},"filePathRelative":"email-provider-setup.md"}');export{l as comp,u as data};
