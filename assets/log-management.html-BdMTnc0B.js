import{_ as s,c as n,a as e,o as l}from"./app-BPesaNQn.js";const i={};function o(t,a){return l(),n("div",null,a[0]||(a[0]=[e(`<h1 id="日志管理" tabindex="-1"><a class="header-anchor" href="#日志管理"><span>日志管理</span></a></h1><p>Melody Auth 提供了电子邮件、短信和登录活动的日志记录功能。这有助于你监控系统活动、排查问题，并维护用于安全与合规的审计记录。</p><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>Melody Auth 的日志系统会跟踪三种类型的活动：</p><ul><li><strong>电子邮件日志</strong>：记录所有发出的邮件（验证、密码重置、多因素认证等）</li><li><strong>短信日志</strong>：记录为多因素认证和验证发送的所有短信</li><li><strong>登录日志</strong>：记录用户的身份验证尝试，包括 IP 和地理位置数据</li></ul><h2 id="启用日志" tabindex="-1"><a class="header-anchor" href="#启用日志"><span>启用日志</span></a></h2><p>出于隐私和存储考虑，日志默认是禁用的。你可以在 <code>server/wrangler.toml</code> 文件中分别启用它们：</p><div class="language-toml line-numbers-mode" data-highlighter="prismjs" data-ext="toml"><pre><code class="language-toml"><span class="line"><span class="token punctuation">[</span><span class="token table class-name">vars</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token key property">ENABLE_EMAIL_LOG</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token key property">ENABLE_SMS_LOG</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token key property">ENABLE_SIGN_IN_LOG</span> <span class="token punctuation">=</span> <span class="token boolean">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="访问日志" tabindex="-1"><a class="header-anchor" href="#访问日志"><span>访问日志</span></a></h2><p>启用日志后，你可以通过管理面板访问日志：</p><ol><li>进入管理面板</li><li>点击侧边栏导航中的 <strong>“Logs”</strong></li><li>根据已启用的日志类型查看不同的日志</li></ol><h2 id="清理旧日志" tabindex="-1"><a class="header-anchor" href="#清理旧日志"><span>清理旧日志</span></a></h2><p>管理面板为每种日志类型提供了一个 “Clean” 按钮，可用于：</p><ul><li>删除 30 天以前的日志</li><li>释放数据库存储空间</li><li>符合数据保留策略的合规要求</li></ul><p><strong>警告：</strong> 日志清理是永久性操作，无法撤销。清理前务必备份数据。</p><h4 id="清理日志步骤" tabindex="-1"><a class="header-anchor" href="#清理日志步骤"><span>清理日志步骤：</span></a></h4><ol><li>进入管理面板的日志页面</li><li>点击所需日志类型的 “Clean” 按钮</li><li>在对话框中确认操作</li><li>所有 30 天以前的日志将被永久删除</li></ol><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><h3 id="隐私与合规" tabindex="-1"><a class="header-anchor" href="#隐私与合规"><span>隐私与合规</span></a></h3><ul><li><strong>数据披露</strong>：始终在隐私政策中披露数据收集情况</li><li><strong>法规合规</strong>：确保符合 GDPR、CCPA 及其他适用法规</li><li><strong>保留策略</strong>：根据法律要求实施自动清理计划</li></ul><h3 id="存储管理" tabindex="-1"><a class="header-anchor" href="#存储管理"><span>存储管理</span></a></h3><ul><li><strong>定期清理</strong>：设置自动清理流程以防止存储过多</li><li><strong>监控</strong>：监控日志量和存储消耗</li><li><strong>归档</strong>：如需合规，可在清理前考虑归档重要日志</li></ul><h2 id="s2s-api-访问" tabindex="-1"><a class="header-anchor" href="#s2s-api-访问"><span>S2S API 访问</span></a></h2><p>也可以通过 S2S API 以编程方式访问日志：</p><ul><li><code>GET /api/v1/logs/email</code> - 获取电子邮件日志</li><li><code>GET /api/v1/logs/sms</code> - 获取短信日志</li><li><code>GET /api/v1/logs/sign-in</code> - 获取登录日志</li><li><code>DELETE /api/v1/logs/email</code> - 清理电子邮件日志</li><li><code>DELETE /api/v1/logs/sms</code> - 清理短信日志</li><li><code>DELETE /api/v1/logs/sign-in</code> - 清理登录日志</li></ul>`,25)]))}const p=s(i,[["render",o]]),c=JSON.parse('{"path":"/zh/log-management.html","title":"日志管理","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1755219196000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":1,"url":"https://github.com/Baozier"}],"changelog":[{"hash":"48aef26b66375de4db0d1c4e18eeafe5a6ba159a","time":1755219196000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add docs for org groups, user attributes, and log management (#427)"}]},"filePathRelative":"zh/log-management.md"}');export{p as comp,c as data};
