import{_ as o,c as r,a as l,o as t}from"./app-C6b_id82.js";const i={};function n(a,e){return t(),r("div",null,e[0]||(e[0]=[l('<h1 id="部署流水线" tabindex="-1"><a class="header-anchor" href="#部署流水线"><span>部署流水线</span></a></h1><p>本项目提供三条可供使用的 <strong>GitHub Actions</strong> 部署流水线：</p><ul><li><strong>Auth Server</strong> 部署到 <strong>Cloudflare Workers</strong></li><li><strong>Admin Panel</strong> 部署到 <strong>Cloudflare Workers</strong></li><li><strong>Admin Panel</strong> 部署到 <strong>Vercel</strong></li></ul><p>在继续之前，请确保已完成 <a href="https://auth.valuemelody.com/zh/auth-server-setup.html" target="_blank" rel="noopener noreferrer">Auth Server 安装</a> 和 <a href="https://auth.valuemelody.com/zh/admin-panel-setup.html" target="_blank" rel="noopener noreferrer">Admin Panel 安装</a> 的步骤。</p><h2 id="将-auth-server-部署到-cloudflare-workers" tabindex="-1"><a class="header-anchor" href="#将-auth-server-部署到-cloudflare-workers"><span>将 Auth Server 部署到 Cloudflare Workers</span></a></h2><ul><li>查看 <code>.github/workflows/server-deploy.yml</code> 文件。</li><li>在你的仓库中依次进入 <strong>Settings → Secrets and variables → Actions → New repository secret</strong>，添加以下 <strong>secrets</strong>： <ul><li><code>CLOUDFLARE_API_TOKEN</code> — 在 Cloudflare 仪表盘新建一个拥有以下权限的 Token： <ul><li><code>Account - D1 - Edit</code></li><li><code>Account - Workers KV Storage - Edit</code></li><li><code>Account - Workers Scripts - Edit</code></li></ul></li><li><code>CLOUDFLARE_ACCOUNT_ID</code> — 你的 Cloudflare <strong>Account ID</strong></li></ul></li><li>在你的仓库中依次进入 <strong>Settings → Secrets and variables → Variables → New variable</strong>，添加以下 <strong>variables</strong>： <ul><li><code>DATABASE_URL</code> — D1 数据库的连接字符串</li><li><code>EMBEDDED_AUTH_ORIGINS</code> — 允许发起嵌入式认证请求的前端应用源（用逗号分隔）</li><li><code>SERVER_SESSION_SALT</code> — 用于加密会话的随机字符串</li><li><code>WORKERS_ENV</code> — Cloudflare Workers 运行环境，例如 <code>production</code></li></ul></li></ul><h2 id="将-admin-panel-部署到-cloudflare-workers" tabindex="-1"><a class="header-anchor" href="#将-admin-panel-部署到-cloudflare-workers"><span>将 Admin Panel 部署到 Cloudflare Workers</span></a></h2><ul><li>查看 <code>.github/workflows/admin-panel-deploy.yml</code> 文件。</li><li>在你的仓库中依次进入 <strong>Settings → Secrets and variables → Actions → New repository secret</strong>，添加以下 <strong>secrets</strong>： <ul><li><code>CLOUDFLARE_API_TOKEN</code> — 在 Cloudflare 仪表盘新建一个拥有以下权限的 Token： <ul><li><code>Account - D1 - Edit</code></li><li><code>Account - Workers KV Storage - Edit</code></li><li><code>Account - Workers Scripts - Edit</code></li></ul></li><li><code>CLOUDFLARE_ACCOUNT_ID</code> — 你的 Cloudflare <strong>Account ID</strong></li></ul></li><li>在你的仓库中依次进入 <strong>Settings → Secrets and variables → Variables → New variable</strong>，添加以下 <strong>variables</strong>： <ul><li><code>NEXT_PUBLIC_CLIENT_URI</code> — Admin Panel 的访问 URI</li><li><code>NEXT_PUBLIC_SERVER_URI</code> — Auth Server 的访问 URI</li><li><code>NEXT_PUBLIC_CLIENT_ID</code> — Admin Panel 的 <code>clientId</code></li></ul></li></ul><h2 id="将-admin-panel-部署到-vercel" tabindex="-1"><a class="header-anchor" href="#将-admin-panel-部署到-vercel"><span>将 Admin Panel 部署到 Vercel</span></a></h2><ul><li>查看 <code>.github/workflows/admin-panel-vercel-deploy.yml</code> 文件。</li><li>在你的仓库中依次进入 <strong>Settings → Secrets and variables → Actions → New repository secret</strong>，添加以下 <strong>secrets</strong>： <ul><li><code>VERCEL_TOKEN</code> — 在 Vercel 仪表盘生成的 Token</li><li><code>VERCEL_ORG_ID</code> — 你的 Vercel <strong>Organization ID</strong></li><li><code>VERCEL_PROJECT_ID</code> — 你的 Vercel <strong>Project ID</strong></li></ul></li></ul>',10)]))}const c=o(i,[["render",n]]),d=JSON.parse('{"path":"/zh/deployment-pipelines.html","title":"部署流水线","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1748744819000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":1,"url":"https://github.com/Baozier"}],"changelog":[{"hash":"1f6a42a6b45fdfb25e862e4b91e0a9988ee80459","time":1748744819000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add docs in CN (#378)"}]},"filePathRelative":"zh/deployment-pipelines.md"}');export{c as comp,d as data};
