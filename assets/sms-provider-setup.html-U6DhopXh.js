import{_ as e,c as a,a as o,o as d}from"./app-BYllXYX5.js";const r={};function s(l,t){return d(),a("div",null,t[0]||(t[0]=[o('<h1 id="sms-服务商配置" tabindex="-1"><a class="header-anchor" href="#sms-服务商配置"><span>SMS 服务商配置</span></a></h1><p>Melody Auth 支持基于短信的多因素认证 (MFA)。要启用该功能，您需要将 <strong>Twilio</strong> 配置为短信服务商。</p><h2 id="支持的短信服务商" tabindex="-1"><a class="header-anchor" href="#支持的短信服务商"><span>支持的短信服务商</span></a></h2><ul><li>Twilio</li></ul><h2 id="环境变量" tabindex="-1"><a class="header-anchor" href="#环境变量"><span>环境变量</span></a></h2><p>使用下表配置 Twilio 作为您的短信服务商。</p><table><thead><tr><th>变量名</th><th>说明</th><th>示例值</th></tr></thead><tbody><tr><td>ENVIRONMENT</td><td>决定短信发送行为</td><td>&quot;prod&quot; 或 &quot;dev&quot;</td></tr><tr><td>DEV_SMS_RECEIVER</td><td>当 ENVIRONMENT ≠ &quot;prod&quot; 时，用于测试的接收号码</td><td>&quot;+16471231234&quot;</td></tr><tr><td>TWILIO_ACCOUNT_ID</td><td>您的 Twilio account id</td><td></td></tr><tr><td>TWILIO_AUTH_TOKEN</td><td>您的 Twilio auth token</td><td></td></tr><tr><td>TWILIO_SENDER_NUMBER</td><td>您的 Twilio 发送号码</td><td></td></tr></tbody></table><h2 id="生产环境与开发环境差异" tabindex="-1"><a class="header-anchor" href="#生产环境与开发环境差异"><span>生产环境与开发环境差异</span></a></h2><ul><li><p><strong>生产环境（ENVIRONMENT = &quot;prod&quot;）</strong></p><ul><li>短信将发送到真实用户手机号。</li><li>适用于正式部署。</li></ul></li><li><p><strong>开发环境（ENVIRONMENT ≠ &quot;prod&quot;）</strong></p><ul><li>所有短信都会被重定向到 <code>DEV_SMS_RECEIVER</code> 指定的号码。</li><li>适用于测试阶段，避免向真实用户发送短信。</li></ul></li></ul><h2 id="cloudflare-远程-生产环境配置" tabindex="-1"><a class="header-anchor" href="#cloudflare-远程-生产环境配置"><span>Cloudflare 远程 / 生产环境配置</span></a></h2><ol><li>进入 Cloudflare Dashboard → <strong>Workers &amp; Pages</strong>。</li><li>选择您的 <strong>melody-auth</strong> Worker → <strong>Settings</strong> → <strong>Variables</strong>。</li><li>添加适用于您场景的环境变量。</li><li>点击 <strong>Save and deploy</strong> 使改动立即生效。</li></ol><h2 id="cloudflare-本地-开发或-node-js-环境" tabindex="-1"><a class="header-anchor" href="#cloudflare-本地-开发或-node-js-环境"><span>Cloudflare 本地 / 开发或 Node.js 环境</span></a></h2><ol><li>在 <code>melody-auth/server</code> 目录中，找到或创建 <code>.dev.vars</code> 文件（如有需要，可复制 <code>.dev.vars.example</code>）。</li><li>将适用的环境变量写入 <code>.dev.vars</code>。</li></ol><h2 id="sms-mfa-默认国家码" tabindex="-1"><a class="header-anchor" href="#sms-mfa-默认国家码"><span>SMS MFA 默认国家码</span></a></h2><p>SMS MFA 默认国家码为 <strong>+1</strong>。您可以在 <code>server/src/configs/variable.ts</code> 的 <code>SmsMfaConfig</code> 中修改 <code>defaultCountryCode</code>。</p>',15)]))}const n=e(r,[["render",s]]),h=JSON.parse('{"path":"/zh/sms-provider-setup.html","title":"SMS 服务商配置","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1748744819000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":1,"url":"https://github.com/Baozier"}],"changelog":[{"hash":"1f6a42a6b45fdfb25e862e4b91e0a9988ee80459","time":1748744819000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add docs in CN (#378)"}]},"filePathRelative":"zh/sms-provider-setup.md"}');export{n as comp,h as data};
