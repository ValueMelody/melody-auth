import{_ as a,c as s,a as e,o as t}from"./app-B0vnRRk_.js";const p={};function o(i,n){return t(),s("div",null,n[0]||(n[0]=[e(`<h1 id="s2s-api" tabindex="-1"><a class="header-anchor" href="#s2s-api"><span>S2S API</span></a></h1><p>Melody Auth S2S API provides capabilities for server applications to manage resources.</p><h2 id="get-started" tabindex="-1"><a class="header-anchor" href="#get-started"><span>Get Started</span></a></h2><p>To get started, obtain an access_token from the /token endpoint by using your clientId and clientSecret as the Basic Auth header. Use this access_token as a Bearer token in the Authorization header for subsequent requests.</p><ul><li>HTTP Method: <code>POST</code></li><li>Content Type: <code>application/x-www-form-urlencoded</code></li><li>URL: <code>[melody_auth_server_url]/oauth2/v1/token</code></li></ul><h3 id="token-request-parameters" tabindex="-1"><a class="header-anchor" href="#token-request-parameters"><span>Token Request Parameters</span></a></h3><table><thead><tr><th>Property</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td><code>grant_type</code></td><td>&#39;client_credentials&#39;</td><td>true</td><td>Indicates the use of client credentials to exchange for a token</td></tr><tr><td><code>scope</code></td><td>string</td><td>true</td><td>Scopes requested (e.g., &#39;read_user write_user&#39;)</td></tr></tbody></table><h3 id="token-request-example" tabindex="-1"><a class="header-anchor" href="#token-request-example"><span>Token Request example</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> credentials <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>clientId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>clientSecret<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> encodedCredentials <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>credentials<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">&#39;base64&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">grant_type</span><span class="token operator">:</span> <span class="token string">&#39;client_credentials&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#39;read_user write_user&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">const</span> urlEncodedData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/oauth2/v1/token&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;Content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string-property property">&#39;Authorization&#39;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">basic </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>encodedCredentials<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">body</span><span class="token operator">:</span> urlEncodedData<span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="token-response-example" tabindex="-1"><a class="header-anchor" href="#token-response-example"><span>Token Response example</span></a></h3><div class="language-JSON line-numbers-mode" data-highlighter="prismjs" data-ext="JSON"><pre><code><span class="line">{</span>
<span class="line">  &quot;access_token&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyMzQ1NiIsInNjb3BlIjoicmVhZF91c2VyIHdyaXRlX3VzZXIiLCJpYXQiOjE3MjE0MjE4MTcsImV4cCI6MTcyMTQyNTQxN30.blhriLgm67tkL89tVLdeNN5nl4EUssy6FIfp4kTOlqM&quot;,</span>
<span class="line">  &quot;expires_in&quot;:3600,</span>
<span class="line">  &quot;expires_on&quot;:1721425417,</span>
<span class="line">  &quot;token_type&quot;:&quot;Bearer&quot;,</span>
<span class="line">  &quot;scope&quot;:&quot;read_user write_user&quot;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="detailed-documentation" tabindex="-1"><a class="header-anchor" href="#detailed-documentation"><span>Detailed Documentation</span></a></h2><p>For more detailed information, please see <a href="https://auth-server.valuemelody.com/api/v1/swagger" target="_blank" rel="noopener noreferrer">Rest API Swagger</a>.</p>`,13)]))}const c=a(p,[["render",o]]),r=JSON.parse('{"path":"/s2s-api.html","title":"S2S API","lang":"en-US","frontmatter":{},"git":{"updatedTime":1722646919000,"contributors":[{"name":"Baozier","username":"Baozier","email":"byn9826@gmail.com","commits":6,"url":"https://github.com/Baozier"}],"changelog":[{"hash":"399c25dfb36e1569fab7184ffec2bb9ee8e923e3","time":1722646919000,"email":"byn9826@gmail.com","author":"Baozier","message":"Make server, sdk and admin panel build version usable (#63)"},{"hash":"5a57b9f132b11609f16b80cfe7796a3e907f63af","time":1722187585000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add swagger for s2s API (#52)"},{"hash":"8b6fa354a427c71ec3340e98286051d639856f33","time":1721599529000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add basic user detail page to admin panel (#37)"},{"hash":"df95b07b08e44fbd91ba69c93643759d3eee48a8","time":1721595601000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add a simple user list to admin panel (#36)"},{"hash":"53a829d0043e9ad6c218dc46bcfdaade8a6bac1b","time":1721434849000,"email":"byn9826@gmail.com","author":"Baozier","message":"Support get user roles (#34)"},{"hash":"b2d5f348c53193ac5352870c37389baccc88be9f","time":1721422770000,"email":"byn9826@gmail.com","author":"Baozier","message":"Add doc for s2s api (#33)"}]},"filePathRelative":"s2s-api.md"}');export{c as comp,r as data};
